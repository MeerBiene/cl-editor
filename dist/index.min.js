!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).clEditor=e()}(this,(function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function s(t){let e;return r(t,(t=>e=t))(),e}function c(t,e,n){t.$$.on_destroy.push(r(e,n))}function a(t){return null==t?"":t}function h(t,e,n=e){return t.set(n),e}function d(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function b(){return v(" ")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function w(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function k(t,e,n){t.classList[n?"add":"remove"](e)}class j{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=g(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)u(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(f)}}let H;function _(t){H=t}function z(){if(!H)throw new Error("Function called outside component initialization");return H}function M(t){z().$$.on_mount.push(t)}function E(){const t=z();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const i=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach((e=>{e.call(t,i)}))}}}const B=[],L=[],C=[],T=[],F=Promise.resolve();let O=!1;function R(t){C.push(t)}let A=!1;const I=new Set;function N(){if(!A){A=!0;do{for(let t=0;t<B.length;t+=1){const e=B[t];_(e),D(e.$$)}for(_(null),B.length=0;L.length;)L.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];I.has(e)||(I.add(e),e())}C.length=0}while(B.length);for(;T.length;)T.pop()();O=!1,A=!1,I.clear()}}function D(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const S=new Set;function q(t,e){t&&t.i&&(S.delete(t),t.i(e))}function U(t,e,n,o){if(t&&t.o){if(S.has(t))return;S.add(t),undefined.c.push((()=>{S.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const V="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function P(t){t&&t.c()}function X(t,n,l,r){const{fragment:s,on_mount:c,on_destroy:a,after_update:h}=t.$$;s&&s.m(n,l),r||R((()=>{const n=c.map(e).filter(i);a?a.push(...n):o(n),t.$$.on_mount=[]})),h.forEach(R)}function J(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(t,e){-1===t.$$.dirty[0]&&(B.push(t),O||(O=!0,F.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,i,l,r,s,c,a=[-1]){const h=H;_(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:i.context||[]),callbacks:n(),dirty:a,skip_bound:!1};let u=!1;if(d.ctx=l?l(e,i.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return d.ctx&&s(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),u&&Q(e,t)),n})):[],d.update(),u=!0,o(d.before_update),d.fragment=!!r&&r(d.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);d.fragment&&d.fragment.l(t),t.forEach(f)}else d.fragment&&d.fragment.c();i.intro&&q(e.$$.fragment),X(e,i.target,i.anchor,i.customElement),N()}_(h)}class K{$destroy(){J(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}let G={};const Y=(t,e=null)=>{document.execCommand(t,!1,e)},Z=(t,e)=>{if(e=e||(t&&t.tagName?[t.tagName]:[]),!t||!t.parentNode)return e;const n=(t=t.parentNode).tagName;return t.style&&t.getAttribute&&[t.style.textAlign||t.getAttribute("align"),t.style.color||"FONT"===n&&"forecolor",t.style.backgroundColor&&"backcolor"].filter((t=>t)).forEach((t=>e.push(t))),"DIV"===n?e:(e.push(n),Z(t,e).filter((t=>null!=t)))},tt=t=>{const e=document.getSelection();if(G.range=null,e.rangeCount){let n,o=G.range=e.getRangeAt(0),i=document.createRange();i.selectNodeContents(t),i.setEnd(o.startContainer,o.startOffset),n=(i+"").length,G.metaRange={start:n,end:n+(o+"").length}}},et=t=>{let e,n=G.metaRange,o=G.range,i=document.getSelection();if(o){if(n&&n.start!==n.end){let o,i=0,l=[t],r=!1,s=!1;for(e=document.createRange();!s&&(o=l.pop());)if(3===o.nodeType){let t=i+o.length;!r&&n.start>=i&&n.start<=t&&(e.setStart(o,n.start-i),r=!0),r&&n.end>=i&&n.end<=t&&(e.setEnd(o,n.end-i),s=!0),i=t}else{let t=o.childNodes,e=t.length;for(;e>0;)e-=1,l.push(t[e])}}i.removeAllRanges(),i.addRange(e||o)}},nt=(t,e)=>{Array.from(t).forEach((t=>{e.some((e=>e===t.tagName.toLowerCase()))&&(t.children.length&&nt(t.children,e),(t=>{const e=document.createDocumentFragment();for(;t.firstChild;){const n=t.removeChild(t.firstChild);e.appendChild(n)}t.parentNode.replaceChild(e,t)})(t))}))},ot=t=>Object.keys(t).map((e=>t[e])),it=t=>(["style","script","applet","embed","noframes","noscript"].forEach((e=>{t=t.replace(new RegExp(`<${e}.*?${e}(.*?)>`,"gi"),"")})),t),lt=(t,e)=>t===e||!!t.parentElement&&lt(t.parentElement,e),rt=[];function st(e,n=t){let o;const i=[];function r(t){if(l(e,t)&&(e=t,o)){const t=!rt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),rt.push(n,e)}if(t){for(let t=0;t<rt.length;t+=2)rt[t][0](rt[t+1]);rt.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(l,s=t){const c=[l,s];return i.push(c),1===i.length&&(o=n(r)||t),l(e),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}const ct='<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M31.1 48.9l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9L15 50.4c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L11 41.8c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7c2.5-2.6 3.1-6.7 1.5-10l-5.9 5.9zM38.7 22.5l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2L42 38c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1c0 .1 0 .1 0 0z"></path><path d="M44.2 30.5c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.3-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.9 40.6c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM49.9 55.4h-8.5v-5h8.5v-8.9h5.2v8.9h8.5v5h-8.5v8.9h-5.2v-8.9z"></path></svg>';var at={viewHtml:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path fill="none" stroke="currentColor" stroke-width="8" stroke-miterlimit="10" d="M26.9 17.9L9 36.2 26.9 54M45 54l17.9-18.3L45 17.9"></path></svg>',title:"View HTML",result:function(){let t=s(this.references),e=s(this.state).actionObj,n=s(this.helper);n.showEditor=!n.showEditor,t.editor.style.display=n.showEditor?"block":"none",t.raw.style.display=n.showEditor?"none":"block",n.showEditor?t.editor.innerHTML=t.raw.value:t.raw.value=t.editor.innerHTML,setTimeout((()=>{Object.keys(e).forEach((t=>e[t].disabled=!n.showEditor)),e.viewHtml.disabled=!1,e.viewHtml.active=!n.showEditor,this.state.update((t=>(t.actionBtns=ot(e),t.actionObj=e,t)))}))}},undo:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M61.2 51.2c0-5.1-2.1-9.7-5.4-13.1-3.3-3.3-8-5.4-13.1-5.4H26.1v-12L10.8 36l15.3 15.3V39.1h16.7c3.3 0 6.4 1.3 8.5 3.5 2.2 2.2 3.5 5.2 3.5 8.5h6.4z"></path></svg>',title:"Undo",result:()=>Y("undo")},redo:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M10.8 51.2c0-5.1 2.1-9.7 5.4-13.1 3.3-3.3 8-5.4 13.1-5.4H46v-12L61.3 36 45.9 51.3V39.1H29.3c-3.3 0-6.4 1.3-8.5 3.5-2.2 2.2-3.5 5.2-3.5 8.5h-6.5z"></path></svg>',title:"Redo",result:()=>Y("redo")},b:{icon:"<b>B</b>",title:"Bold",result:()=>Y("bold")},i:{icon:"<i>I</i>",title:"Italic",result:()=>Y("italic")},u:{icon:"<u>U</u>",title:"Underline",result:()=>Y("underline")},strike:{icon:"<strike>S</strike>",title:"Strike-through",result:()=>Y("strikeThrough")},sup:{icon:"A<sup>2</sup>",title:"Superscript",result:()=>Y("superscript")},sub:{icon:"A<sub>2</sub>",title:"Subscript",result:()=>Y("subscript")},h1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:()=>Y("formatBlock","<H1>")},h2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:()=>Y("formatBlock","<H2>")},p:{icon:"&#182;",title:"Paragraph",result:()=>Y("formatBlock","<P>")},blockquote:{icon:"&#8220; &#8221;",title:"Quote",result:()=>Y("formatBlock","<BLOCKQUOTE>")},ol:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M27 14h36v8H27zM27 50h36v8H27zM27 32h36v8H27zM11.8 15.8V22h1.8v-7.8h-1.5l-2.1 1 .3 1.3zM12.1 38.5l.7-.6c1.1-1 2.1-2.1 2.1-3.4 0-1.4-1-2.4-2.7-2.4-1.1 0-2 .4-2.6.8l.5 1.3c.4-.3 1-.6 1.7-.6.9 0 1.3.5 1.3 1.1 0 .9-.9 1.8-2.6 3.3l-1 .9V40H15v-1.5h-2.9zM13.3 53.9c1-.4 1.4-1 1.4-1.8 0-1.1-.9-1.9-2.6-1.9-1 0-1.9.3-2.4.6l.4 1.3c.3-.2 1-.5 1.6-.5.8 0 1.2.3 1.2.8 0 .7-.8.9-1.4.9h-.7v1.3h.7c.8 0 1.6.3 1.6 1.1 0 .6-.5 1-1.4 1-.7 0-1.5-.3-1.8-.5l-.4 1.4c.5.3 1.3.6 2.3.6 2 0 3.2-1 3.2-2.4 0-1.1-.8-1.8-1.7-1.9z"></path></svg>',title:"Ordered List",result:()=>Y("insertOrderedList")},ul:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M27 14h36v8H27zM27 50h36v8H27zM9 50h9v8H9zM9 32h9v8H9zM9 14h9v8H9zM27 32h36v8H27z"></path></svg>',title:"Unordered List",result:()=>Y("insertUnorderedList")},hr:{icon:"&#8213;",title:"Horizontal Line",result:()=>Y("insertHorizontalRule")},left:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M9 14h54v8H9zM9 50h54v8H9zM9 32h36v8H9z"></path></svg>',title:"Justify left",result:()=>Y("justifyLeft")},right:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M9 14h54v8H9zM9 50h54v8H9zM27 32h36v8H27z"></path></svg>',title:"Justify right",result:()=>Y("justifyRight")},center:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M9 14h54v8H9zM9 50h54v8H9zM18 32h36v8H18z"></path></svg>',title:"Justify center",result:()=>Y("justifyCenter")},justify:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M9 14h54v8H9zM9 50h54v8H9zM9 32h54v8H9z"></path></svg>',title:"Justify full",result:()=>Y("justifyFull")},a:{icon:ct,title:"Insert link",result:function(){const t=s(this.state).actionObj,e=s(this.references);if(t.a.active){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(document.getSelection().focusNode),e.removeAllRanges(),e.addRange(n),Y("unlink"),t.a.title="Insert link",t.a.icon=ct,this.state.update((e=>(e.actionBtn=ot(t),e.actionObj=t,e)))}else tt(e.editor),e.modal.$set({show:!0,event:"linkUrl",title:"Insert link",label:"Url"}),s(this.helper).link||(this.helper.update((t=>(t.link=!0,t))),e.modal.$on("linkUrl",(n=>{et(e.editor),Y("createLink",n.detail),t.a.title="Unlink",t.a.icon='<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M30.9 49.1l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9l-5.2-5.2c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L10.8 42c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7C38 50.5 38.6 46.3 37 43l-6.1 6.1zM38.5 22.7l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2-6.5 6.5c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1z"></path><path d="M44.1 30.7c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.2-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.8 40.8c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM41.3 55.8v-5h22.2v5H41.3z"></path></svg>',this.state.update((e=>(e.actionBtn=ot(t),e.actionObj=t,e)))})))}},image:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M64 17v38H8V17h56m8-8H0v54h72V9z"></path><path d="M17.5 22C15 22 13 24 13 26.5s2 4.5 4.5 4.5 4.5-2 4.5-4.5-2-4.5-4.5-4.5zM16 50h27L29.5 32zM36 36.2l8.9-8.5L60.2 50H45.9S35.6 35.9 36 36.2z"></path></svg>',title:"Image",result:function(){const t=s(this.references);tt(t.editor),t.modal.$set({show:!0,event:"imageUrl",title:"Insert image",label:"Url"}),s(this.helper).image||(this.helper.update((t=>(t.image=!0,t))),t.modal.$on("imageUrl",(e=>{et(t.editor),Y("insertImage",e.detail)})))}},forecolor:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M32 15h7.8L56 57.1h-7.9l-4-11.1H27.4l-4 11.1h-7.6L32 15zm-2.5 25.4h12.9L36 22.3h-.2l-6.3 18.1z"></path></svg>',title:"Text color",colorPicker:!0,result:function(){ht.call(this,"foreColor")}},backcolor:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M36.5 22.3l-6.3 18.1H43l-6.3-18.1z"></path><path d="M9 8.9v54.2h54.1V8.9H9zm39.9 48.2L45 46H28.2l-3.9 11.1h-7.6L32.8 15h7.8l16.2 42.1h-7.9z"></path></svg>',title:"Background color",colorPicker:!0,result:function(){ht.call(this,"backColor")}},removeFormat:{icon:'<svg viewBox="0 0 72 72" width="17px" height="100%"><path d="M58.2 54.6L52 48.5l3.6-3.6 6.1 6.1 6.4-6.4 3.8 3.8-6.4 6.4 6.1 6.1-3.6 3.6-6.1-6.1-6.4 6.4-3.7-3.8 6.4-6.4zM21.7 52.1H50V57H21.7zM18.8 15.2h34.1v6.4H39.5v24.2h-7.4V21.5H18.8v-6.3z"></path></svg>',title:"Remove format",result:function(){const t=s(this.references),e=window.getSelection();if(!e.toString().length){nt(t.editor.children,this.removeFormatTags);const n=document.createRange();n.selectNodeContents(t.editor),e.removeAllRanges(),e.addRange(n)}Y("removeFormat"),e.removeAllRanges()}}};const ht=function(t){const e=s(this.references);tt(e.editor),console.log(e.colorPicker),e.colorPicker.$set({show:!0,event:t}),s(this.helper)[t]||(this.helper.update((e=>(e[t]=!0,e))),e.colorPicker.$on(t,(n=>{let o=n.detail;if(o.modal){this.modal.$set({show:!0,event:"colorHref",title:"Text color",label:"foreColor"===t?"Text color":"Background color"});const n=t;s(this.helper)[`${n}Modal`]||(s(this.helper)[`${n}Modal`]=!0,this.modal.$on("colorHref",(t=>{let o=t.detail;et(e.editor),Y(n,o)})))}else et(e.editor),Y(t,o.color)})))};function dt(t){let e;return{c(){e=g("span"),e.textContent="Required",x(e,"class","msg-error svelte-42yfje")},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function ut(e){let n,i,l,r,s,c,a,h,p,j,H,_,z,M,E,B,L,C,T,F,O,R,A=e[2]&&dt();return{c(){n=g("div"),i=g("div"),l=b(),r=g("div"),s=g("div"),c=g("span"),a=v(e[3]),h=b(),p=g("form"),j=g("label"),H=g("input"),_=b(),z=g("span"),M=g("span"),E=v(e[4]),B=b(),A&&A.c(),L=b(),C=g("button"),C.textContent="Confirm",T=b(),F=g("button"),F.textContent="Cancel",x(i,"class","cl-editor-overlay svelte-42yfje"),x(c,"class","modal-title svelte-42yfje"),x(H,"type","text"),x(H,"name","text"),x(H,"class","svelte-42yfje"),x(M,"class","svelte-42yfje"),x(z,"class","input-info svelte-42yfje"),x(j,"class","modal-label svelte-42yfje"),k(j,"input-error",e[2]),x(C,"class","modal-button modal-submit svelte-42yfje"),x(C,"type","submit"),x(F,"class","modal-button modal-reset svelte-42yfje"),x(F,"type","reset"),x(s,"class","modal-box svelte-42yfje"),x(r,"class","cl-editor-modal svelte-42yfje"),w(n,"display",e[0]?"block":"none")},m(t,o){var f;u(t,n,o),d(n,i),d(n,l),d(n,r),d(r,s),d(s,c),d(c,a),d(s,h),d(s,p),d(p,j),d(j,H),e[10](H),y(H,e[1]),d(j,_),d(j,z),d(z,M),d(M,E),d(z,B),A&&A.m(z,null),d(p,L),d(p,C),d(p,T),d(p,F),O||(R=[m(i,"click",e[7]),m(H,"keyup",e[8]),m(H,"input",e[11]),m(F,"click",e[7]),m(p,"submit",(f=e[12],function(t){return t.preventDefault(),f.call(this,t)}))],O=!0)},p(t,[e]){8&e&&$(a,t[3]),2&e&&H.value!==t[1]&&y(H,t[1]),16&e&&$(E,t[4]),t[2]?A||(A=dt(),A.c(),A.m(z,null)):A&&(A.d(1),A=null),4&e&&k(j,"input-error",t[2]),1&e&&w(n,"display",t[0]?"block":"none")},i:t,o:t,d(t){t&&f(n),e[10](null),A&&A.d(),O=!1,o(R)}}}function ft(t,e,n){let o=new E,{show:i=!1}=e,{text:l=""}=e,{event:r=""}=e,{title:s=""}=e,{label:c=""}=e,{error:a=!1}=e,h={};function d(){l?(console.log("dispatcher",l,r),o(r,l),u()):(n(2,a=!0),h.text.focus())}function u(){n(0,i=!1),n(1,l=""),n(2,a=!1)}return t.$$set=t=>{"show"in t&&n(0,i=t.show),"text"in t&&n(1,l=t.text),"event"in t&&n(9,r=t.event),"title"in t&&n(3,s=t.title),"label"in t&&n(4,c=t.label),"error"in t&&n(2,a=t.error)},t.$$.update=()=>{33&t.$$.dirty&&i&&setTimeout((()=>{h.text.focus()}))},[i,l,a,s,c,h,d,u,function(){n(2,a=!1)},r,function(t){L[t?"unshift":"push"]((()=>{h.text=t,n(5,h)}))},function(){l=this.value,n(1,l)},t=>d()]}class pt extends K{constructor(t){var e;super(),document.getElementById("svelte-42yfje-style")||((e=g("style")).id="svelte-42yfje-style",e.textContent='.cl-editor-modal.svelte-42yfje.svelte-42yfje{position:absolute;top:37px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);max-width:520px;width:100%;height:140px;backface-visibility:hidden;z-index:11}.cl-editor-overlay.svelte-42yfje.svelte-42yfje{position:absolute;background-color:rgba(255,255,255,.5);height:100%;width:100%;left:0;top:0;z-index:10}.modal-box.svelte-42yfje.svelte-42yfje{position:absolute;top:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);max-width:500px;width:calc(100% - 20px);padding-bottom:36px;z-index:1;background-color:#FFF;text-align:center;font-size:14px;box-shadow:rgba(0,0,0,.2) 0 2px 3px;-webkit-backface-visibility:hidden;backface-visibility:hidden}.modal-title.svelte-42yfje.svelte-42yfje{font-size:24px;font-weight:700;margin:0 0 20px;padding:2px 0 4px;display:block;border-bottom:1px solid #EEE;color:#333;background:#fbfcfc}.modal-label.svelte-42yfje.svelte-42yfje{display:block;position:relative;margin:15px 12px;height:29px;line-height:29px;overflow:hidden}.modal-label.svelte-42yfje input.svelte-42yfje{position:absolute;top:0;right:0;height:27px;line-height:25px;border:1px solid #DEDEDE;background:#fff;font-size:14px;max-width:330px;width:70%;padding:0 7px;transition:all 150ms}.modal-label.svelte-42yfje input.svelte-42yfje:focus{outline:none}.input-error.svelte-42yfje input.svelte-42yfje{border:1px solid #e74c3c}.input-info.svelte-42yfje.svelte-42yfje{display:block;text-align:left;height:25px;line-height:25px;transition:all 150ms}.input-info.svelte-42yfje span.svelte-42yfje{display:block;color:#69878f;background-color:#fbfcfc;border:1px solid #DEDEDE;padding:1px 7px;width:150px}.input-error.svelte-42yfje .input-info.svelte-42yfje{margin-top:-29px}.input-error.svelte-42yfje .msg-error.svelte-42yfje{color:#e74c3c}.modal-button.svelte-42yfje.svelte-42yfje{position:absolute;bottom:10px;right:0;text-decoration:none;color:#FFF;display:block;width:100px;height:35px;line-height:33px;margin:0 10px;background-color:#333;border:none;cursor:pointer;font-family:"Lato",Helvetica,Verdana,sans-serif;font-size:16px;transition:all 150ms}.modal-submit.svelte-42yfje.svelte-42yfje{right:110px;background:#2bc06a}.modal-reset.svelte-42yfje.svelte-42yfje{color:#555;background:#e6e6e6}',d(document.head,e)),W(this,t,ft,ut,l,{show:0,text:1,event:9,title:3,label:4,error:2})}get show(){return this.$$.ctx[0]}set show(t){this.$set({show:t}),N()}get text(){return this.$$.ctx[1]}set text(t){this.$set({text:t}),N()}get event(){return this.$$.ctx[9]}set event(t){this.$set({event:t}),N()}get title(){return this.$$.ctx[3]}set title(t){this.$set({title:t}),N()}get label(){return this.$$.ctx[4]}set label(t){this.$set({label:t}),N()}get error(){return this.$$.ctx[2]}set error(t){this.$set({error:t}),N()}}function gt(t,e,n){const o=t.slice();return o[9]=e[n],o}function vt(t){let e,n,o,i,l=(t[9].text||"")+"";function r(...e){return t[5](t[9],...e)}return{c(){e=g("button"),n=v(l),x(e,"type","button"),x(e,"class","color-picker-btn svelte-njq4pk"),w(e,"background-color",t[9].color)},m(t,l){u(t,e,l),d(e,n),o||(i=m(e,"click",r),o=!0)},p(o,i){t=o,2&i&&l!==(l=(t[9].text||"")+"")&&$(n,l),2&i&&w(e,"background-color",t[9].color)},d(t){t&&f(e),o=!1,i()}}}function bt(e){let n,o,i,l,r,s,c=e[1],a=[];for(let t=0;t<c.length;t+=1)a[t]=vt(gt(e,c,t));return{c(){n=g("div"),o=g("div"),i=b(),l=g("div");for(let t=0;t<a.length;t+=1)a[t].c();x(o,"class","color-picker-overlay svelte-njq4pk"),x(l,"class","color-picker-wrapper svelte-njq4pk"),w(n,"display",e[0]?"block":"none")},m(t,c){u(t,n,c),d(n,o),d(n,i),d(n,l);for(let t=0;t<a.length;t+=1)a[t].m(l,null);r||(s=m(o,"click",e[2]),r=!0)},p(t,[e]){if(10&e){let n;for(c=t[1],n=0;n<c.length;n+=1){const o=gt(t,c,n);a[n]?a[n].p(o,e):(a[n]=vt(o),a[n].c(),a[n].m(l,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=c.length}1&e&&w(n,"display",t[0]?"block":"none")},i:t,o:t,d(t){t&&f(n),p(a,t),r=!1,s()}}}function mt(t,e,n){const o=new E,i=["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646","ffff00","f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","fff2ca","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","ffe694","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","b7dde8","fac08f","f2c314","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","92cddc","e36c09","c09100","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","31859b","974806","7f6000"];let{show:l=!1}=e,{btns:r=[]}=e,{event:s=""}=e;function c(){n(0,l=!1)}function a(t){o(s,t),c()}M((()=>{n(1,r=(()=>{const t=i.map((t=>({color:`#${t}`})));return t.push({text:"#",modal:!0}),t})())}));return t.$$set=t=>{"show"in t&&n(0,l=t.show),"btns"in t&&n(1,r=t.btns),"event"in t&&n(4,s=t.event)},[l,r,c,a,s,(t,e)=>a(t)]}class xt extends K{constructor(t){var e;super(),document.getElementById("svelte-njq4pk-style")||((e=g("style")).id="svelte-njq4pk-style",e.textContent='.color-picker-wrapper.svelte-njq4pk{border:1px solid #ecf0f1;border-top:none;background:#FFF;box-shadow:rgba(0,0,0,.1) 0 2px 3px;width:290px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);padding:0;position:absolute;top:37px;z-index:11}.color-picker-overlay.svelte-njq4pk{position:absolute;background-color:rgba(255,255,255,.5);height:100%;width:100%;left:0;top:0;z-index:10}.color-picker-btn.svelte-njq4pk{display:block;position:relative;float:left;height:20px;width:20px;border:1px solid #333;padding:0;margin:2px;line-height:35px;text-decoration:none;background:#FFF;color:#333!important;cursor:pointer;text-align:left;font-size:15px;transition:all 150ms;line-height:20px;padding:0px 5px}.color-picker-btn.svelte-njq4pk:hover::after{content:" ";display:block;position:absolute;top:-5px;left:-5px;height:27px;width:27px;background:inherit;border:1px solid #FFF;box-shadow:#000 0 0 2px;z-index:10}',d(document.head,e)),W(this,t,mt,bt,l,{show:0,btns:1,event:4})}}const $t=function(t){const{subscribe:e,set:n,update:o}=st({actionBtns:[],actionObj:{}});return{name:t,set:n,update:o,subscribe:e}},{document:yt}=V;function wt(t,e,n){const o=t.slice();return o[43]=e[n],o}function kt(t){let e,n,o,i,l,r,s,c,h=t[43].icon+"";function p(...e){return t[29](t[43],...e)}return{c(){e=g("button"),o=b(),n=new j(o),x(e,"type","button"),x(e,"class",i=a(t[43].active?t[7]:t[6])+" svelte-at27n4"),x(e,"title",l=t[43].title),e.disabled=r=t[43].disabled},m(t,i){u(t,e,i),n.m(h,e),d(e,o),s||(c=m(e,"click",p),s=!0)},p(o,s){t=o,256&s[0]&&h!==(h=t[43].icon+"")&&n.p(h),448&s[0]&&i!==(i=a(t[43].active?t[7]:t[6])+" svelte-at27n4")&&x(e,"class",i),256&s[0]&&l!==(l=t[43].title)&&x(e,"title",l),256&s[0]&&r!==(r=t[43].disabled)&&(e.disabled=r)},d(t){t&&f(e),s=!1,c()}}}function jt(t){let e,n,i,l,r,s,c,h,v,$,y,k,j,H,_,z,M,E=t[8].actionBtns,B=[];for(let e=0;e<E.length;e+=1)B[e]=kt(wt(t,E,e));y=new pt({props:{}}),t[36](y);return j=new xt({props:{}}),t[37](j),{c(){e=g("div"),n=g("div");for(let t=0;t<B.length;t+=1)B[t].c();l=b(),r=g("div"),c=b(),h=g("textarea"),$=b(),P(y.$$.fragment),k=b(),P(j.$$.fragment),x(n,"class",i=a(t[4])+" svelte-at27n4"),x(r,"id",t[1]),x(r,"class",s=a(t[5])+" svelte-at27n4"),w(r,"height",t[0]),x(r,"contenteditable","true"),x(h,"class",v=a(t[3])+" svelte-at27n4"),w(h,"max-height",t[0]),w(h,"min-height",t[0]),x(e,"class",H=a(t[2])+" svelte-at27n4")},m(o,i){u(o,e,i),d(e,n);for(let t=0;t<B.length;t+=1)B[t].m(n,null);d(e,l),d(e,r),t[30](r),d(e,c),d(e,h),t[35](h),d(e,$),X(y,e,null),d(e,k),X(j,e,null),t[38](e),_=!0,z||(M=[m(window,"click",t[28]),m(r,"input",t[31]),m(r,"mouseup",t[32]),m(r,"keyup",t[33]),m(r,"paste",t[34])],z=!0)},p(t,o){if(8640&o[0]){let e;for(E=t[8].actionBtns,e=0;e<E.length;e+=1){const i=wt(t,E,e);B[e]?B[e].p(i,o):(B[e]=kt(i),B[e].c(),B[e].m(n,null))}for(;e<B.length;e+=1)B[e].d(1);B.length=E.length}(!_||16&o[0]&&i!==(i=a(t[4])+" svelte-at27n4"))&&x(n,"class",i),(!_||2&o[0])&&x(r,"id",t[1]),(!_||32&o[0]&&s!==(s=a(t[5])+" svelte-at27n4"))&&x(r,"class",s),(!_||1&o[0])&&w(r,"height",t[0]),(!_||8&o[0]&&v!==(v=a(t[3])+" svelte-at27n4"))&&x(h,"class",v),(!_||1&o[0])&&w(h,"max-height",t[0]),(!_||1&o[0])&&w(h,"min-height",t[0]);y.$set({});j.$set({}),(!_||4&o[0]&&H!==(H=a(t[2])+" svelte-at27n4"))&&x(e,"class",H)},i(t){_||(q(y.$$.fragment,t),q(j.$$.fragment,t),_=!0)},o(t){U(y.$$.fragment,t),U(j.$$.fragment,t),_=!1},d(n){n&&f(e),p(B,n),t[30](null),t[35](null),t[36](null),J(y),t[37](null),J(j),t[38](null),z=!1,o(M)}}}const Ht=[];function _t(t,e,n){let o,i,l,r=new E,{actions:s=[]}=e,{height:a="300px"}=e,{html:d=""}=e,{contentId:u=""}=e,{removeFormatTags:f=["h1","h2","blockquote"]}=e,{cl_root:p="cl"}=e,{cl_textarea:g="cl-textarea"}=e,{cl_actionbar:v="cl-actionbar"}=e,{cl_content:b="cl-content"}=e,{cl_button:m="cl-button"}=e,{cl_activeButton:x="cl-button active"}=e,$=st({foreColor:!1,backColor:!1,foreColorModal:!1,backColorModal:!1,image:!1,link:!1,showEditor:!0,blurActive:!1});c(t,$,(t=>n(39,l=t))),Ht.push({});let y="editor_"+Ht.length,w=$t(y);c(t,w,(t=>n(8,o=t)));let k=st({});c(t,k,(t=>n(9,i=t))),h(w,o.actionObj=((t,e=[])=>{if(e&&e.length){const n={};return e.forEach((e=>{"string"==typeof e?n[e]=Object.assign({},t[e]):t[e.name]?n[e.name]=Object.assign(t[e.name],e):n[e.name]=Object.assign({},e)})),n}return t})(at,s),o);let j={exec:F,getHtml:O,getText:R,setHtml:A,saveRange:I,restoreRange:N,helper:$,references:k,state:w,removeFormatTags:f};function H(t){i.editor.focus(),I(i.editor),N(i.editor),t.result.call(j),_()}function _(t){const e=t?[]:Z(document.getSelection().focusNode);Object.keys(o.actionObj).forEach((t=>h(w,o.actionObj[t].active=!1,o))),e.forEach((t=>(o.actionObj[t.toLowerCase()]||{}).active=!0)),h(w,o.actionBtns=ot(o.actionObj),o),w.set(o)}function B(t){t.preventDefault(),F("insertHTML",t.clipboardData.getData("text/html")?(t=>{const e=t.match(/<!--StartFragment-->(.*?)<!--EndFragment-->/);let n=e&&e[1]||t;return n=n.replace(/\r?\n|\r/g," ").replace(/<!--(.*?)-->/g,"").replace(new RegExp("<(/)*(meta|link|span|\\?xml:|st1:|o:|font|w:sdt)(.*?)>","gi"),"").replace(/<!\[if !supportLists\]>(.*?)<!\[endif\]>/gi,"").replace(/style="[^"]*"/gi,"").replace(/style='[^']*'/gi,"").replace(/&nbsp;/gi," ").replace(/>(\s+)</g,"><").replace(/class="[^"]*"/gi,"").replace(/class='[^']*'/gi,"").replace(/<[^/].*?>/g,(t=>t.split(/[ >]/g)[0]+">")).trim(),n=it(n),n})(t.clipboardData.getData("text/html")):t.clipboardData.getData("text"))}function C(t){r("change",t)}function T(t){!lt(t.target,i.editorWrapper)&&l.blurActive&&r("blur",t),h($,l.blurActive=!0,l)}function F(t,e){Y(t,e)}function O(t){return t?it(i.editor.innerHTML):i.editor.innerHTML}function R(){return i.editor.innerText}function A(t,e){const n=e?it(t):t||"";h(k,i.editor.innerHTML=n,i),h(k,i.raw.value=n,i)}function I(){tt(i.editor)}function N(){et(i.editor)}!function(t,e){z().$$.context.set(t,e)}(y,j),M((()=>{h(w,o.actionBtns=ot(o.actionObj),o),A(d)}));const D=i;return t.$$set=t=>{"actions"in t&&n(18,s=t.actions),"height"in t&&n(0,a=t.height),"html"in t&&n(19,d=t.html),"contentId"in t&&n(1,u=t.contentId),"removeFormatTags"in t&&n(20,f=t.removeFormatTags),"cl_root"in t&&n(2,p=t.cl_root),"cl_textarea"in t&&n(3,g=t.cl_textarea),"cl_actionbar"in t&&n(4,v=t.cl_actionbar),"cl_content"in t&&n(5,b=t.cl_content),"cl_button"in t&&n(6,m=t.cl_button),"cl_activeButton"in t&&n(7,x=t.cl_activeButton)},[a,u,p,g,v,b,m,x,o,i,$,w,k,H,_,B,C,T,s,d,f,F,O,R,A,I,N,D,t=>T(t),(t,e)=>H(t),function(t){L[t?"unshift":"push"]((()=>{i.editor=t,k.set(i)}))},t=>C(t.target.innerHTML),()=>_(),()=>_(),t=>B(t),function(t){L[t?"unshift":"push"]((()=>{i.raw=t,k.set(i)}))},function(t){L[t?"unshift":"push"]((()=>{i.modal=t,k.set(i)}))},function(t){L[t?"unshift":"push"]((()=>{i.colorPicker=t,k.set(i)}))},function(t){L[t?"unshift":"push"]((()=>{i.editorWrapper=t,k.set(i)}))}]}return class extends K{constructor(t){var e;super(),yt.getElementById("svelte-at27n4-style")||((e=g("style")).id="svelte-at27n4-style",e.textContent=".cl.svelte-at27n4 .svelte-at27n4{box-sizing:border-box}.cl.svelte-at27n4.svelte-at27n4{box-shadow:0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1);box-sizing:border-box;width:100%;position:relative}.cl-content.svelte-at27n4.svelte-at27n4{height:300px;outline:0;overflow-y:auto;padding:10px;width:100%;background-color:white}.cl-actionbar.svelte-at27n4.svelte-at27n4{background-color:#ecf0f1;border-bottom:1px solid rgba(10, 10, 10, 0.1);width:100%}.cl-button.svelte-at27n4.svelte-at27n4{background-color:transparent;border:none;cursor:pointer;height:35px;outline:0;width:35px;vertical-align:top;position:relative}.cl-button.svelte-at27n4.svelte-at27n4:hover,.cl-button.active.svelte-at27n4.svelte-at27n4{background-color:#fff}.cl-button.svelte-at27n4.svelte-at27n4:disabled{opacity:0.5;pointer-events:none}.cl-textarea.svelte-at27n4.svelte-at27n4{display:none;max-width:100%;min-width:100%;border:none;padding:10px}.cl-textarea.svelte-at27n4.svelte-at27n4:focus{outline:none}",d(yt.head,e)),W(this,t,_t,jt,l,{actions:18,height:0,html:19,contentId:1,removeFormatTags:20,cl_root:2,cl_textarea:3,cl_actionbar:4,cl_content:5,cl_button:6,cl_activeButton:7,exec:21,getHtml:22,getText:23,setHtml:24,saveRange:25,restoreRange:26,refs:27},[-1,-1])}get actions(){return this.$$.ctx[18]}set actions(t){this.$set({actions:t}),N()}get height(){return this.$$.ctx[0]}set height(t){this.$set({height:t}),N()}get html(){return this.$$.ctx[19]}set html(t){this.$set({html:t}),N()}get contentId(){return this.$$.ctx[1]}set contentId(t){this.$set({contentId:t}),N()}get removeFormatTags(){return this.$$.ctx[20]}set removeFormatTags(t){this.$set({removeFormatTags:t}),N()}get cl_root(){return this.$$.ctx[2]}set cl_root(t){this.$set({cl_root:t}),N()}get cl_textarea(){return this.$$.ctx[3]}set cl_textarea(t){this.$set({cl_textarea:t}),N()}get cl_actionbar(){return this.$$.ctx[4]}set cl_actionbar(t){this.$set({cl_actionbar:t}),N()}get cl_content(){return this.$$.ctx[5]}set cl_content(t){this.$set({cl_content:t}),N()}get cl_button(){return this.$$.ctx[6]}set cl_button(t){this.$set({cl_button:t}),N()}get cl_activeButton(){return this.$$.ctx[7]}set cl_activeButton(t){this.$set({cl_activeButton:t}),N()}get exec(){return this.$$.ctx[21]}get getHtml(){return this.$$.ctx[22]}get getText(){return this.$$.ctx[23]}get setHtml(){return this.$$.ctx[24]}get saveRange(){return this.$$.ctx[25]}get restoreRange(){return this.$$.ctx[26]}get refs(){return this.$$.ctx[27]}}}));
